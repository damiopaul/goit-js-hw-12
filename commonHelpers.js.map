{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nexport async function fetchImages (keyWord, page, perPage) {\n   \n    const options = {\n        params: {\n            key: \"43133442-47d9d1fd9c6a7a8602dec5dde\",\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            q: keyWord,\n            per_page: perPage,\n            page: page\n        }\n    }\n    const searchUrl = \"https://pixabay.com/api/\";\n\n    try {\n        const responce = await axios.get(searchUrl, options);\n        return responce.data;\n                \n    } catch (error){\n        throw new Error(error.message);\n    }\n}\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst galleryImgs = document.querySelector(\".gallery\");\n\nconst lightbox = new SimpleLightbox('.gallery a', {caprionsData: 'alt'});\n\n\nexport function renderImages(data) {\n    const galleryMarkup = data.map(({largeImageURL,webformatURL,tags,likes,views,comments,downloads})=> {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-item-link\" href=\"${largeImageURL}\">\n        <img class=\"item\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <ul class=\"item-info-container\">\n        <li class=\"item-additional-info\">\n        <p><span class=\"accent\">Likes</span></br>${likes}</p>\n        </li>\n        <li class=\"item-additional-info\">\n        <p><span class=\"accent\">Views</span></br>${views}</p>\n        </li>\n        <li class=\"item-additional-info\">\n        <p><span class=\"accent\">Comments</span></br>${comments}</p>\n        </li>\n        <li class=\"item-additional-info\">\n        <p><span class=\"accent\">Downloads</span></br>${downloads}</p>\n        </li>\n        </ul>\n        </li>`\n    })\n\n    galleryImgs.insertAdjacentHTML('beforeend', galleryMarkup);\n    \n    lightbox.refresh();\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderImages } from \"./js/render-functions.js\";\n\nlet keyWord;\n\nlet page = 1;\n\nlet perPage = 15;\n\nlet maxPage;\n\nconst galleryImgs = document.querySelector(\".gallery\");\n\nconst form = document.querySelector(\"form\");\n\nconst loader = document.querySelector(\".loader\");\n\nconst showMore = document.querySelector(\".load-more-btn\");\n\n\n// описуємо лоадер \n\nfunction scrollPage() {\n    const galleryItem = document.querySelector(\".gallery-item\");\n    const cardHeight = galleryItem.getBoundingClientRect().height;\n    const scrollDistance = cardHeight * 2;\n    window.scrollTo({\n        top: scrollDistance*2,\n        behavior: \"smooth\"\n    });\n    console.log(scrollDistance)\n}\n\nfunction scrollSpeed() {\n    const list = document.querySelector(\".gallery\")\n    const firstChild = list.children[0]\n    const cardHeight = firstChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n    });\n\n}\nfunction showLoader(){\n    loader.classList.remove(\"is-hidden\");\n}\n\nfunction hideLoader(){\n    loader.classList.add(\"is-hidden\");\n}\n\nasync function  submitHandler (event) {\n    try {\n        event.preventDefault();\n    \n    galleryImgs.innerHTML = \"\";\n\n   keyWord = event.target.elements.search.value.trim();    \n\n    if (keyWord === \"\"){\n        iziToast.warning({\n            color: \"yellow\",\n            message: \"Please fill in the field for search!\",\n            position: \"topRight\"\n        })\n        return\n    }\n\n    showLoader();   \n\n        const data = await fetchImages(keyWord, page, perPage);\n        page = 1;\n        if (page >= 1){\n            showMore.classList.remove(\"is-hidden\");\n        }\n        if (data.hits.length === 0){\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                backgroundColor: \"red\",\n                messageColor: \"white\",\n                position: \"topRight\"\n            })\n        }\n\n        maxPage = Math.ceil(data.totalHits / perPage);\n        renderImages(data.hits)\n         \n    } catch (error){\n\n        console.log (error)\n        iziToast.error({\n            title: 'Error',\n            message: `Sorry, there are no images matching your search query. Please, try again!`,\n            position: 'topRight'}\n            )\n\n    }finally {\n        hideLoader();\n    }\n}\n\nasync function showMoreClicked () {\n    page += 1;\n    showLoader();\n\n    try {\n        const data = await fetchImages (keyWord, page);\n        renderImages(data.hits);\n        scrollPage();\n        if (page >= maxPage) {\n            showMore.classList.add(\"is-hidden\");\n\n            iziToast.show({\n                color: 'green',\n                message: `Sorry, you have reached the end of collection.`,\n                position: 'topCenter',\n                timeout: 3000,\n              });\n        }\n    } catch (error) {\n        console.log (error)\n    } finally {\n        hideLoader();\n    }\n}\n\n\nform.addEventListener(\"submit\", submitHandler);\nshowMore.addEventListener(\"click\", showMoreClicked);\n\n\n\n\n\n\n"],"names":["fetchImages","keyWord","page","perPage","options","searchUrl","axios","error","galleryImgs","lightbox","SimpleLightbox","renderImages","data","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","maxPage","form","loader","showMore","scrollPage","scrollDistance","showLoader","hideLoader","submitHandler","event","iziToast","showMoreClicked"],"mappings":"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"}